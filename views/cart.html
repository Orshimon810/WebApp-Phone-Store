<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phonebook</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../public/css/cart.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <!--JQuery------->
    <script src="../public/Jquery.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/6bf8df2f4a.js" crossorigin="anonymous"></script>
    </head>
<body>
    <!------menu-bar------->
    <nav>
        <div class="navigation">
        <!-- logo-->
        <a href="#" class="logo">
            <img src="../public/img/logo.png"/>
        </a>
         <!--menu-->
         <ul class ="menu">
            <li><a href="#">About</a></li>
            <li><a href="../views/shop.html">Shop</a></li>
            <li><a href="../views/mainPage.html">Home</a></li>
            <li><a href="../views/chatEntrace.html">Chat</a></li>
         </ul>
         <div class="right-menu">
                <!--search-->
                <a href="#" class="search">
                    <i class="fa-solid fa-search"></i>
                </a>
                 <!--user-->
                 <a href="#" class="user">
                    <i class="fas fa-user"></i>
                </a>
                 <!--cart-icon-->
                 <a href="#">
                    <i class="fas fa-shopping-cart">
                    <!--number of products in cart-->
                    <span class="num-cart-producuts">0</span>
                    </i>
                </a>
         </div>
      </div>
    </nav>

    <!--search-bar-------------------------->
    <div class="search-bar">
        <!--search-input--->
        <div class="search-input">
            <!--input-->
            <input type="text" placeholder="Search For Product"/>
            <!--cancel button-->
            <a href="#" class="search-cancel">
                <i class="fas fa-times"></i>
            </a>
        </div>
    </div>

    <!--login and signup form-->
    <div class="form">
        <!--login-->
        <div class="login-form">
            <a href="#" class="form-cancel">
                <i class="fas fa-times"></i>
            </a>
            <strong>Sign In</strong>
            <form id="login">
                <input type="email" placeholder="Example@gmail.com" name="email">
                <input type="password" placeholder="Password" name="password">
                <input type="submit" value="Sign In">
            </form>
            <div class="form-btns">
                <a href="#" class="sign-up-btn">Create Account</a>
            </div>
        </div>


         <!--Sign Up-->
         <div class="sign-up-form">
            <a href="#" class="form-cancel">
                <i class="fas fa-times"></i>
            </a>
            <strong>Sign Up</strong>
            <form id="register">
                <input type="text" placeholder="Full Name" name="name" required>
                <input type="email" placeholder="Example@gmail.com" name="email" required>
                <input type="password" placeholder="Password" name="password" const packageName = require('packageName');>
                <input type="submit" value="Sign Up">
            </form>
            <div class="form-btns">
                <a href="#" class="already-account">Already have an account?</a>
            </div>
        </div>
    </div>


     <section id="cart" class="pt-5 mt-5 container">
        <h2 class="font-weight-bold pt-5">Shopping cart</h2>
     </section>

     <section id="cart-container" class="container my-5">
        <table width="100%">
            <thead>
                <tr>
                    <td>Remove</td>
                    <td>Image</td>
                    <td>Product</td>
                    <td>Price</td>
                    <td>quantity</td>
                    <td>Total</td>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
     </section>


   
     <section id="cart-bottom" class="container">
        <div class="row">
            <div class="coupon col-lg-6 col-md col-12 mb-4">
                <div>
                <h5>Coupon</h5>
                <p>Enter your Coupon if you have one.</p>
                <input type="text" placeholder="Coupon code">
                <button class="btn btn-dark">Apply Coupon</button>
                </div>
            </div>
            <div class="total col-lg-6 col-md col-12">
                <div>
                <h5>Cart Total</h5>
                <div class ="d-flex justify-content-between">
                    <h6>Subtotal:</h6>
                    <p class="subtotal-value">$215</p>
                </div>
                <div class ="d-flex justify-content-between">
                    <h6>Shipping:</h6>
                    <p class="shipping-price">$255</p>
                </div>
                <hr class="second-hr">
                <div class ="d-flex justify-content-between">
                    <h6>Total:</h6>
                    <p class="total-value">$255</p>
                </div>
                <button class="ml-auto btn btn-dark">PROCEED TO CHECKOUT</button>
                </div>
            </div>
     </section>

    
        <footer class="section-p1">
           <div class="col">
               <img src ="../public/img/logo.png" alt="" class="footer-logo">
               <h4>Contact</h4>
               <p><strong>Adress:</strong> Wiesel St 2, Rishon LeTsiyon</p>
               <p><strong>Phone:</strong> +972 52 8090 777 </p>
               <p><strong>Hours:</strong> 10:00-20:00, Sun-Fri</p>
               <div class="follow">
                   <h4>Follow Us:</h4>
                   <div class ="social-icon">
                       <i class="fab fa-facebook"></i>
                       <i class="fab fa-twitter"></i>
                       <i class="fab fa-instagram"></i>
                       <i class="fab fa-pinterest"></i>
                       <i class="fab fa-youtube"></i>
                   </div>
               </div>
           </div>
   
           <div class="col">
               <h4><strong>About</strong></h4>
               <a href="#">About Us</a>
               <a href="#">Delivery Information</a>
               <a href="#">Privacy Policy</a>
               <a href="#">Term & Conditions</a>
               <a href="#">Contact Us</a>
           </div>
   
           <div class="col">
               <h4><strong>My Account</strong></h4>
               <a href="#">Sign In</a>
               <a href="#">View Cart</a>
               <a href="#">My Wishlist</a>
               <a href="#">Track My order</a>
               <a href="#">Help</a>
           </div>
   
           <div class="col install">
               <h4><strong>Install App</strong></h4>
               <p>From App Store or Google Play</p>
               <div class="row">
                   <img src="../public/img/app.jpg" alt="">
                   <img src="../public/img/play.jpg" alt="">
               </div>
               <p>Secured Payment Gateways</p>
               <img src="../public/img/pay.png" alt="">
           </div>
   
           <div class="copyright">
               <p>&copy; 2023 Zigel&Or PHONEBOOK - Digital Shop</p>
           </div>
        </footer>

        <script>
            $(document).ready(function() {
                // Retrieve cart data from localStorage
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                const cartContainer = $('#cart-container tbody');
                const subtotalValue = $('.subtotal-value');
                const totalValue = $('.total-value');
                const shippingPrice = $('.shipping-price');
        
                // Function to update cart totals
                function updateCartTotals() {
                    const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
                    const shipping = 50; // You can adjust the shipping cost as needed
                    const total = subtotal + shipping;
                    console.log(total)
                    subtotalValue.text(`₪${subtotal.toFixed(2)}`);
                    totalValue.text(`₪${total.toFixed(2)}`);
                    shippingPrice.text(`₪${shipping.toFixed(2)}`);
                }
        
                // Function to update the cart icon with the number of items in the cart
                function updateCartIcon() {
                    const numCartItems = cart.length;
                    $('.num-cart-producuts').text(numCartItems);
                }
        
                // Function to update the cart items display
                function updateCartDisplay() {
                    cartContainer.empty(); // Clear the existing content
                    cart.forEach(item => {
                        const cartItem = document.createElement('tr');
                        cartItem.innerHTML = `
                            <td><a href="#" class="remove-item" data-product-id="${item.id}"><i class="fas fa-trash-alt"></i></a></td>
                            <td><img src="${item.image}" alt="${item.name}"></td>
                            <td>
                                <h5>${item.name}</h5>
                            </td>
                            <td>
                                <h5>₪${item.price}</h5>
                            </td>
                            <td><input class="w-25 pl-1 quantity-input" value="${item.quantity}" type="number" min="1"></td>
                            <td>
                                <h5 class="item-total">₪${(item.price * item.quantity).toFixed(2)}</h5>
                            </td>
                        `;
                        cartContainer.append(cartItem);
                    });
                }
        
                // Handle removing items from the cart
                $('#cart-container').on('click', '.remove-item', function() {
                    const productId = $(this).data('product-id');
                    // Remove the item from the cart and update localStorage
                    const updatedCart = cart.filter(item => item.id !== productId);
                    console.log(updatedCart);
                    localStorage.setItem('cart', JSON.stringify(updatedCart));
                    // Remove the item from the displayed table
                    $(this).closest('tr').remove();
                     // Update cart total and subtotal
                     updateCartTotals();
                     // Update cart icon
                     updateCartIcon();
                });
        
                // Initial updates on page load
                updateCartTotals();
                updateCartDisplay();
                updateCartIcon();
            });
        </script>
      
</body>
</html>